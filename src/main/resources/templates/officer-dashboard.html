<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Officer Dashboard | CSP</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<style>
        body {
            background: #eef2f7;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar-custom {
            background: linear-gradient(90deg, #0f172a, #1e293b);
        }

        .card {
            border-radius: 14px;
            border: none;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        }

        .stat-card {
            padding: 20px;
            text-align: center;
        }

        .table thead {
            background: #1e293b;
            color: white;
        }

        footer {
            padding: 15px;
            background: #0f172a;
            color: white;
            text-align: center;
        }
    </style>

<body style="background:#eef2f7">

<!-- NAVBAR -->
<div class="bg-dark text-white p-3 d-flex justify-content-between">
    <h5>CSP Officer Panel</h5>
    <div>
        Welcome, <b th:text="${officerName}"></b>
        <a th:href="@{/logout}" class="btn btn-danger btn-sm ms-3">Logout</a>
    </div>
</div>

<div class="container mt-4">

    <!-- SUMMARY -->
    <div class="row mb-4 text-center">
        <div class="col-md-4">
            <div class="card p-3 shadow-sm">
                <h6>Pending Decision</h6>
                <h2 class="text-warning" th:text="${pendingApps.size()}"></h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-3 shadow-sm">
                <h6>Approved</h6>
                <h2 class="text-success" th:text="${approvedApps.size()}"></h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-3 shadow-sm">
                <h6>Rejected</h6>
                <h2 class="text-danger" th:text="${rejectedApps.size()}"></h2>
            </div>
        </div>
    </div>

    <!-- TABS -->
    <ul class="nav nav-tabs">
        <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#pending">Pending</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#approved">Approved</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#rejected">Rejected</button></li>
    </ul>

    <div class="tab-content mt-3">

        <!-- PENDING -->
        <div class="tab-pane fade show active" id="pending">
            <div class="card">
                <div class="card-header">Awaiting Final Decision</div>
                <table class="table table-hover text-center">
                    <tr>
                        <th>ID</th><th>Citizen</th><th>Service</th><th>Date</th><th>Action</th>
                    </tr>
                    <tr th:each="app : ${pendingApps}">
                        <td th:text="${app.applicationId}"></td>
                        <td th:text="${app.citizen.name}"></td>
                        <td th:text="${app.serviceType}"></td>
                        <td th:text="${#temporals.format(app.applicationDate,'dd-MM-yyyy')}"></td>
                        <td>
                            <a th:href="@{/officer/review/{id}(id=${app.applicationId})}"
                               class="btn btn-primary btn-sm">Review</a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- APPROVED -->
        <div class="tab-pane fade" id="approved">
            <div class="card">
                <div class="card-header">Approved Applications</div>
                <table class="table table-hover text-center">
                    <tr th:each="app : ${approvedApps}">
                        <td th:text="${app.applicationId}"></td>
                        <td th:text="${app.citizen.name}"></td>
                        <td th:text="${app.serviceType}"></td>
                        <td><span class="badge bg-success">APPROVED</span></td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- REJECTED -->
        <div class="tab-pane fade" id="rejected">
            <div class="card">
                <div class="card-header">Rejected Applications</div>
                <table class="table table-hover text-center">
                    <tr th:each="app : ${rejectedApps}">
                        <td th:text="${app.applicationId}"></td>
                        <td th:text="${app.citizen.name}"></td>
                        <td th:text="${app.serviceType}"></td>
                        <td><span class="badge bg-danger">REJECTED</span></td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
